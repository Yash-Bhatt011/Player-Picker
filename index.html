<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --primary: #1e40af;
      --primary-light: #3b82f6;
      --secondary: #059669;
      --accent: #f59e0b;
      --background: #f9fafb;
      --card-bg: #ffffff;
      --text: #1f2937;
      --text-light: #6b7280;
      --border: #e5e7eb;
      --success: #10b981;
    }

    /* Dark mode variables */
    [data-theme="dark"] {
      --primary: #60a5fa;
      --primary-light: #3b82f6;
      --secondary: #34d399;
      --accent: #fbbf24;
      --background: #1f2937;
      --card-bg: #111827;
      --text: #f3f4f6;
      --text-light: #9ca3af;
      --border: #374151;
      --success: #10b981;
    }

    /* Dark mode specific overrides */
    [data-theme="dark"] .stat-input {
      background-color: #374151;
      color: var(--text);
    }

    [data-theme="dark"] .result-item {
      background-color: #374151;
    }

    [data-theme="dark"] .total-stat-box {
      background-color: #1f2937;
    }

    /* Theme toggle button */
    .theme-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--card-bg);
      border: 2px solid var(--border);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 1000;
      transition: all 0.3s ease;
    }

    .theme-toggle:hover {
      transform: scale(1.1);
    }

    .theme-toggle svg {
      width: 20px;
      height: 20px;
      color: var(--text);
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background-color: var(--background);
      color: var(--text);
      padding: 20px;
      min-height: 100vh;
    }
    
    .container {
      max-width: 950px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .header {
      text-align: center;
      padding: 20px 0;
      border-bottom: 2px solid var(--border);
      margin-bottom: 30px;
    }
    
    .header h1 {
      color: var(--primary);
      font-size: 2.5rem;
      margin-bottom: 10px;
      font-weight: 700;
    }
    
    .header p {
      color: var(--text-light);
      font-size: 1.1rem;
    }
    
    .card {
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      padding: 25px;
      margin-bottom: 30px;
      border: 1px solid var(--border);
    }
    
    .card-title {
      font-size: 1.5rem;
      margin-bottom: 20px;
      color: var(--primary);
      border-bottom: 2px solid var(--border);
      padding-bottom: 10px;
      font-weight: 600;
    }
    
    .setup-section {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .player-setup, .team-setup {
      flex: 1;
      min-width: 300px;
    }
    
    .input-group {
      margin-bottom: 20px;
    }
    
    .input-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--text);
    }
    
    .input-group input {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid var(--border);
      border-radius: 8px;
      font-size: 1rem;
      transition: border-color 0.3s;
      outline: none;
    }
    
    .input-group input:focus {
      border-color: var(--primary-light);
    }
    
    .team-date {
      font-size: 0.8rem;
      color: var(--text-light);
      margin-top: 4px;
    }
    
    .team-info {
      display: flex;
      flex-direction: column;
    }
    
    .team-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 20px;
    }
    
    .team-card {
      flex: 1;
      min-width: 250px;
      background-color: var(--card-bg);
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      border: 1px solid var(--border);
    }
    
    .team-card-header {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .team-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: var(--primary-light);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 12px;
      color: white;
      font-weight: 600;
      font-size: 1.2rem;
    }
    
    .team-2 .team-icon {
      background-color: var(--secondary);
    }
    
    .team-name {
      font-weight: 600;
      font-size: 1.2rem;
    }
    
    .player-list {
      border-top: 1px solid var(--border);
      padding-top: 15px;
    }
    
    .player-item {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
      padding: 8px;
      border-radius: 6px;
      transition: background-color 0.2s;
    }
    
    .player-item:hover {
      background-color: var(--background);
    }
    
    .player-number {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background-color: var(--primary-light);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
      margin-right: 10px;
    }
    
    .team-2 .player-number {
      background-color: var(--secondary);
    }
    
    .player-stats {
      margin-left: auto;
      display: flex;
      gap: 10px;
    }
    
    .stat-input {
      width: 60px;
      padding: 4px;
      border: 1px solid var(--border);
      border-radius: 4px;
      text-align: center;
    }
    
    .player-total {
      margin-left: auto;
      font-weight: 600;
      color: var(--primary);
    }
    
    .stats-summary {
      margin-top: 10px;
      padding-top: 10px;
      border-top: 1px solid var(--border);
    }
    
    .stats-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 5px;
    }
    
    .action-buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 30px 0;
    }
    
    .btn {
      padding: 12px 24px;
      border-radius: 8px;
      border: none;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .btn-primary {
      background-color: var(--primary);
      color: white;
    }
    
    .btn-primary:hover {
      background-color: var(--primary-light);
      transform: translateY(-2px);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .btn-secondary {
      background-color: var(--text-light);
      color: white;
    }
    
    .btn-secondary:hover {
      background-color: var(--text);
      transform: translateY(-2px);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .btn-print {
      background-color: var(--accent);
      color: white;
    }
    
    .btn-print:hover {
      opacity: 0.9;
      transform: translateY(-2px);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .btn i {
      margin-right: 8px;
    }
    
    .results-section {
      display: none;
    }
    
    .results-title {
      text-align: center;
      margin-bottom: 30px;
    }
    
    .results-title h2 {
      color: var(--primary);
      font-size: 2rem;
      margin-bottom: 10px;
    }
    
    .results-title p {
      color: var(--text-light);
    }
    
    .results-container {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
    }
    
    .result-card {
      flex: 1;
      min-width: 300px;
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      overflow: hidden;
      border: 1px solid var(--border);
      transition: transform 0.3s ease;
    }

    .result-card:hover {
      transform: translateY(-5px);
    }

    .result-header {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
      color: white;
      padding: 20px;
      font-size: 1.3rem;
      font-weight: 600;
    }

    .result-card:nth-child(2) .result-header {
      background: linear-gradient(135deg, var(--secondary) 0%, #10b981 100%);
    }

    .result-body {
      padding: 20px;
    }

    .result-item {
      background-color: var(--background);
      margin-bottom: 12px;
      border-radius: 8px;
      padding: 15px;
      display: grid;
      grid-template-columns: auto 1fr auto;
      gap: 15px;
      align-items: center;
    }

    .player-info {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .player-name {
      font-weight: 600;
      color: var(--text);
    }

    .team-name {
      font-size: 0.9rem;
      color: var(--text-light);
    }

    .player-stats-display {
      text-align: right;
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .stat-row {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      font-size: 0.9rem;
      color: var(--text-light);
    }

    .stat-total {
      font-weight: 600;
      color: var(--primary);
      font-size: 1.1rem;
      margin-top: 5px;
      padding-top: 5px;
      border-top: 1px dashed var(--border);
    }

    .team-total-section {
      margin-top: 20px;
      padding: 20px;
      background-color: var(--background);
      border-radius: 8px;
    }

    .team-total-header {
      font-weight: 600;
      color: var(--primary);
      margin-bottom: 10px;
    }

    .total-stats-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-bottom: 15px;
    }

    .total-stat-box {
      background-color: white;
      padding: 12px;
      border-radius: 6px;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }

    .stat-label {
      font-size: 0.8rem;
      color: var(--text-light);
      margin-bottom: 5px;
    }

    .stat-value {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--primary);
    }

    .result-card:nth-child(2) .stat-value {
      color: var(--secondary);
    }

    .result-card:nth-child(2) .result-header {
      background-color: var(--secondary);
    }
    
    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      background-color: #fd0;
      animation: confetti 5s ease-in-out infinite;
    }
    
    @keyframes confetti {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }
    
    @media (max-width: 768px) {
      .container {
        padding: 10px;
      }
      
      .card {
        padding: 15px;
      }
      
      .setup-section {
        flex-direction: column;
      }
      
      .action-buttons {
        flex-direction: column;
      }
      
      .btn {
        width: 100%;
      }
    }
    
    @media print {
      .header p, .setup-card, .action-buttons .btn:not(.btn-print) {
        display: none;
      }
      
      .results-section {
        display: block !important;
      }
      
      .card {
        box-shadow: none;
        border: 1px solid #ddd;
      }
    }

    .comparison-section {
      margin-top: 20px;
    }
    
    .comparison-card {
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      padding: 20px;
      text-align: center;
      border: 1px solid var(--border);
    }
    
    .comparison-card h3 {
      color: var(--primary);
      margin-bottom: 15px;
    }
    
    #score-difference {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 15px;
      padding: 10px;
      border-radius: 8px;
    }
    
    .score-bar-container {
      height: 20px;
      background-color: var(--border);
      border-radius: 10px;
      position: relative;
      overflow: hidden;
    }
    
    #score-bar {
      height: 100%;
      width: 50%;
      background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
      transition: transform 0.5s ease;
      transform-origin: center;
    }
    
    .winning {
      background-color: rgba(16, 185, 129, 0.1);
      color: var(--success);
    }
    
    .losing {
      background-color: rgba(239, 68, 68, 0.1);
      color: #ef4444;
    }
    
    .tied {
      background-color: rgba(107, 114, 128, 0.1);
      color: var(--text-light);
    }

    /* Winner Celebration Styles */
    .celebration-modal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 80%;
        max-width: 500px;
        background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
        padding: 2rem;
        border-radius: 20px;
        text-align: center;
        z-index: 1000;
        color: white;
        box-shadow: 0 0 100px rgba(0,0,0,0.5);
        animation: modalPop 0.5s ease-out;
        display: none;
    }

    .trophy-container {
        position: relative;
        height: 120px;
        margin: 20px 0;
    }

    .trophy-icon {
        font-size: 5rem;
        animation: trophyBounce 2s infinite;
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
    }

    .winner-name {
        font-size: 2.5rem;
        margin: 20px 0;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        animation: winnerPulse 2s infinite;
    }

    .sparkle {
        position: absolute;
        width: 20px;
        height: 20px;
        background: white;
        clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
        animation: sparkleFloat 3s infinite linear;
    }

    .firework {
        position: absolute;
        width: 4px;
        height: 4px;
        border-radius: 50%;
        animation: firework 1s ease-out forwards;
    }

    @keyframes modalPop {
        0% { transform: translate(-50%, -50%) scale(0); }
        60% { transform: translate(-50%, -50%) scale(1.1); }
        100% { transform: translate(-50%, -50%) scale(1); }
    }

    @keyframes trophyBounce {
        0%, 100% { transform: translateX(-50%) translateY(0); }
        50% { transform: translateX(-50%) translateY(-20px); }
    }

    @keyframes winnerPulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
    }

    @keyframes sparkleFloat {
        0% { transform: translateY(0) rotate(0deg); opacity: 1; }
        100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
    }

    @keyframes firework {
        0% { transform: translateY(0); opacity: 1; }
        100% { transform: translateY(-100px); opacity: 0; }
    }

    .winner-stats {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin: 20px 0;
    }

    .stat-highlight {
        background: rgba(255, 255, 255, 0.2);
        padding: 10px 20px;
        border-radius: 10px;
        animation: statPop 0.5s ease-out;
    }

    @keyframes statPop {
        0% { transform: scale(0); }
        70% { transform: scale(1.1); }
        100% { transform: scale(1); }
    }
  </style>
  <title>Cricket Team Draft</title>
</head>
<body>
  <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
    </svg>
  </button>
  <div class="container">
    <div class="header">
      <h1>Cricket Team Draft</h1>
      <p>Randomly assign players from cricket teams for a balanced and fair selection</p>
    </div>
    
    <div class="card setup-card">
      <h2 class="card-title">Setup</h2>
      
      <div class="setup-section">
        <div class="player-setup">
          <h3>Player Names</h3>
          <div class="input-group">
            <label for="player1-name">Player 1</label>
            <input type="text" id="player1-name" placeholder="Enter name for Player 1" value="Meet">
          </div>
          <div class="input-group">
            <label for="player2-name">Player 2</label>
            <input type="text" id="player2-name" placeholder="Enter name for Player 2" value="Piyush">
          </div>
        </div>
        
        <div class="team-setup">
          <h3>Team Names</h3>
          <div class="input-group">
            <label for="team1-name">Team 1</label>
            <input type="text" id="team1-name" placeholder="Enter name for Team 1" readonly>
            <div class="team-date" id="team1-date"></div>
          </div>
          <div class="input-group">
            <label for="team2-name">Team 2</label>
            <input type="text" id="team2-name" placeholder="Enter name for Team 2" readonly>
            <div class="team-date" id="team2-date"></div>
          </div>
          <button class="btn btn-secondary" onclick="autoFillTeams()" style="width: 100%; margin-top: 10px;">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 8px;">
              <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
            </svg>
            Get Next Match
          </button>
        </div>
      </div>
      
      <div class="team-container">
        <div class="team-card team-1">
          <div class="team-card-header">
            <div class="team-icon">1</div>
            <div class="team-name" id="team1-display">Team 1</div>
          </div>
          <div class="player-list">
            <div class="player-item">
              <div class="player-number">1</div>
              <div>Player 1</div>
              <div class="player-stats">
                <input type="number" class="stat-input" placeholder="Runs" min="0">
                <input type="number" class="stat-input" placeholder="4s" min="0">
                <input type="number" class="stat-input" placeholder="6s" min="0">
              </div>
            </div>
            <div class="player-item">
              <div class="player-number">2</div>
              <div>Player 2</div>
              <div class="player-stats">
                <input type="number" class="stat-input" placeholder="Runs" min="0">
                <input type="number" class="stat-input" placeholder="4s" min="0">
                <input type="number" class="stat-input" placeholder="6s" min="0">
              </div>
            </div>
            <div class="player-item">
              <div class="player-number">3</div>
              <div>Player 3</div>
              <div class="player-stats">
                <input type="number" class="stat-input" placeholder="Runs" min="0">
                <input type="number" class="stat-input" placeholder="4s" min="0">
                <input type="number" class="stat-input" placeholder="6s" min="0">
              </div>
            </div>
            <div class="player-item">
              <div class="player-number">4</div>
              <div>Player 4</div>
              <div class="player-stats">
                <input type="number" class="stat-input" placeholder="Runs" min="0">
                <input type="number" class="stat-input" placeholder="4s" min="0">
                <input type="number" class="stat-input" placeholder="6s" min="0">
              </div>
            </div>
          </div>
        </div>
        
        <div class="team-card team-2">
          <div class="team-card-header">
            <div class="team-icon">2</div>
            <div class="team-name" id="team2-display">Team 2</div>
          </div>
          <div class="player-list">
            <div class="player-item">
              <div class="player-number">1</div>
              <div>Player 1</div>
              <div class="player-stats">
                <input type="number" class="stat-input" placeholder="Runs" min="0">
                <input type="number" class="stat-input" placeholder="4s" min="0">
                <input type="number" class="stat-input" placeholder="6s" min="0">
              </div>
            </div>
            <div class="player-item">
              <div class="player-number">2</div>
              <div>Player 2</div>
              <div class="player-stats">
                <input type="number" class="stat-input" placeholder="Runs" min="0">
                <input type="number" class="stat-input" placeholder="4s" min="0">
                <input type="number" class="stat-input" placeholder="6s" min="0">
              </div>
            </div>
            <div class="player-item">
              <div class="player-number">3</div>
              <div>Player 3</div>
              <div class="player-stats">
                <input type="number" class="stat-input" placeholder="Runs" min="0">
                <input type="number" class="stat-input" placeholder="4s" min="0">
                <input type="number" class="stat-input" placeholder="6s" min="0">
              </div>
            </div>
            <div class="player-item">
              <div class="player-number">4</div>
              <div>Player 4</div>
              <div class="player-stats">
                <input type="number" class="stat-input" placeholder="Runs" min="0">
                <input type="number" class="stat-input" placeholder="4s" min="0">
                <input type="number" class="stat-input" placeholder="6s" min="0">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="action-buttons">
      <button class="btn btn-primary" id="randomize-btn" onclick="randomizeDraft()">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-shuffle" viewBox="0 0 16 16" style="margin-right: 8px;">
          <path fill-rule="evenodd" d="M0 3.5A.5.5 0 0 1 .5 3H1c2.202 0 3.827 1.24 4.874 2.418.49.552.865 1.102 1.126 1.532.26-.43.636-.98 1.126-1.532C9.173 4.24 10.798 3 13 3v1c-1.798 0-3.173 1.01-4.126 2.082A9.624 9.624 0 0 0 7.556 8a9.624 9.624 0 0 0 1.317 1.918C9.828 10.99 11.204 12 13 12v1c-2.202 0-3.827-1.24-4.874-2.418A10.595 10.595 0 0 1 7 9.05c-.26.43-.636.98-1.126 1.532C4.827 11.76 3.202 13 1 13H.5a.5.5 0 0 1 0-1H1c1.798 0 3.173-1.01 4.126-2.082A9.624 9.624 0 0 0 6.444 8a9.624 9.624 0 0 0-1.317-1.918C4.172 5.01 2.796 4 1 4H.5a.5.5 0 0 1-.5-.5z"/>
          <path d="M13 5.466V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192z"/>
        </svg>
        Randomize Draft
      </button>
      <button class="btn btn-secondary" id="update-btn" onclick="updateStats()">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 8px;">
          <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"/>
        </svg>
        Update Stats
      </button>
    </div>
    
    <div class="results-section" id="results">
      <div class="results-title">
        <h2>Draft Results</h2>
        <p>Here's how the players have been randomly assigned</p>
      </div>
      
      <div class="results-container">
        <div class="result-card">
          <div class="result-header" id="player1-result-header">Player 1's Team</div>
          <div class="result-body">
            <ul class="result-list" id="player1-picks">
              <!-- Results will be inserted here -->
            </ul>
          </div>
        </div>
        
        <div class="result-card">
          <div class="result-header" id="player2-result-header">Player 2's Team</div>
          <div class="result-body">
            <ul class="result-list" id="player2-picks">
              <!-- Results will be inserted here -->
            </ul>
          </div>
        </div>
      </div>

      <div class="comparison-section">
        <div class="comparison-card">
          <h3>Score Comparison</h3>
          <div id="score-difference"></div>
          <div class="score-bar-container">
            <div id="score-bar"></div>
          </div>
        </div>
      </div>
      
      <div class="action-buttons">
        <button class="btn btn-print" onclick="window.print()">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-printer" viewBox="0 0 16 16" style="margin-right: 8px;">
            <path d="M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"/>
            <path d="M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"/>
          </svg>
          Print Results
        </button>
        <button class="btn btn-primary" onclick="shareResults()">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 8px;">
            <path d="M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.5 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5zm-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z"/>
          </svg>
          Share Results
        </button>
      </div>
    </div>
  </div>
  
  <div id="winner-celebration" class="celebration-modal">
    <div class="trophy-container">
        <div class="trophy-icon">üèÜ</div>
    </div>
    <h2 class="winner-name"></h2>
    <div class="winner-stats"></div>
  </div>

  <script>
    function setTheme(theme) {
      document.documentElement.setAttribute('data-theme', theme);
      localStorage.setItem('theme', theme);
      updateThemeIcon(theme);
    }

    function toggleTheme() {
      const currentTheme = localStorage.getItem('theme') || 'light';
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      setTheme(newTheme);
    }

    function updateThemeIcon(theme) {
      const icon = document.querySelector('.theme-toggle svg');
      if (theme === 'dark') {
        icon.innerHTML = `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />`;
      } else {
        icon.innerHTML = `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />`;
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      const savedTheme = localStorage.getItem('theme') || 'light';
      setTheme(savedTheme);
      
      // ...existing code...
    });

    const cricketTeams = [
    { teams: ["Gujarat Titans", "Lucknow Super Giants"], date: "Apr 12", time: "3:30 PM IST" },
  { teams: ["Punjab Kings", "Sunrisers Hyderabad"], date: "Apr 12", time: "7:30 PM IST" },
  { teams: ["Royal Challengers Bengaluru", "Rajasthan Royals"], date: "Apr 13", time: "3:30 PM IST" },
  { teams: ["Mumbai Indians", "Delhi Capitals"], date: "Apr 13", time: "7:30 PM IST" },
  { teams: ["Chennai Super Kings", "Lucknow Super Giants"], date: "Apr 14", time: "7:30 PM IST" },
  { teams: ["Kolkata Knight Riders", "Punjab Kings"], date: "Apr 15", time: "7:30 PM IST" },
  { teams: ["Rajasthan Royals", "Delhi Capitals"], date: "Apr 16", time: "7:30 PM IST" },
  { teams: ["Sunrisers Hyderabad", "Mumbai Indians"], date: "Apr 17", time: "7:30 PM IST" },
  { teams: ["Punjab Kings", "Royal Challengers Bengaluru"], date: "Apr 18", time: "7:30 PM IST" },
  { teams: ["Delhi Capitals", "Gujarat Titans"], date: "Apr 19", time: "3:30 PM IST" },
  { teams: ["Lucknow Super Giants", "Rajasthan Royals"], date: "Apr 19", time: "7:30 PM IST" },
  { teams: ["Royal Challengers Bengaluru", "Punjab Kings"], date: "Apr 20", time: "3:30 PM IST" },
  { teams: ["Chennai Super Kings", "Mumbai Indians"], date: "Apr 20", time: "7:30 PM IST" },
  { teams: ["Gujarat Titans", "Kolkata Knight Riders"], date: "Apr 21", time: "7:30 PM IST" },
  { teams: ["Delhi Capitals", "Lucknow Super Giants"], date: "Apr 22", time: "7:30 PM IST" },
  { teams: ["Mumbai Indians", "Sunrisers Hyderabad"], date: "Apr 23", time: "7:30 PM IST" },
  { teams: ["Rajasthan Royals", "Royal Challengers Bengaluru"], date: "Apr 24", time: "7:30 PM IST" },
  { teams: ["Sunrisers Hyderabad", "Chennai Super Kings"], date: "Apr 25", time: "7:30 PM IST" },
  { teams: ["Punjab Kings", "Kolkata Knight Riders"], date: "Apr 26", time: "7:30 PM IST" },
  { teams: ["Lucknow Super Giants", "Mumbai Indians"], date: "Apr 27", time: "7:30 PM IST" },
  { teams: ["Gujarat Titans", "Rajasthan Royals"], date: "Apr 28", time: "7:30 PM IST" },
  { teams: ["Kolkata Knight Riders", "Delhi Capitals"], date: "Apr 29", time: "7:30 PM IST" },
  { teams: ["Punjab Kings", "Chennai Super Kings"], date: "Apr 30", time: "7:30 PM IST" },
  { teams: ["Mumbai Indians", "Rajasthan Royals"], date: "May 1", time: "7:30 PM IST" },
  { teams: ["Sunrisers Hyderabad", "Gujarat Titans"], date: "May 2", time: "7:30 PM IST" },
  { teams: ["Chennai Super Kings", "Royal Challengers Bengaluru"], date: "May 3", time: "7:30 PM IST" },
  { teams: ["Rajasthan Royals", "Kolkata Knight Riders"], date: "May 4", time: "3:30 PM IST" },
  { teams: ["Lucknow Super Giants", "Punjab Kings"], date: "May 4", time: "7:30 PM IST" },
  { teams: ["Delhi Capitals", "Sunrisers Hyderabad"], date: "May 5", time: "7:30 PM IST" },
  { teams: ["Gujarat Titans", "Mumbai Indians"], date: "May 6", time: "7:30 PM IST" },
  { teams: ["Chennai Super Kings", "Kolkata Knight Riders"], date: "May 7", time: "7:30 PM IST" },
  { teams: ["Delhi Capitals", "Punjab Kings"], date: "May 8", time: "7:30 PM IST" },
  { teams: ["Royal Challengers Bengaluru", "Lucknow Super Giants"], date: "May 9", time: "7:30 PM IST" },
  { teams: ["Kolkata Knight Riders", "Sunrisers Hyderabad"], date: "May 10", time: "7:30 PM IST" },
  { teams: ["Mumbai Indians", "Punjab Kings"], date: "May 11", time: "3:30 PM IST" },
  { teams: ["Gujarat Titans", "Delhi Capitals"], date: "May 11", time: "7:30 PM IST" },
  { teams: ["Rajasthan Royals", "Chennai Super Kings"], date: "May 12", time: "7:30 PM IST" },
  { teams: ["Sunrisers Hyderabad", "Royal Challengers Bengaluru"], date: "May 13", time: "7:30 PM IST" },
  { teams: ["Lucknow Super Giants", "Gujarat Titans"], date: "May 14", time: "7:30 PM IST" },
  { teams: ["Delhi Capitals", "Mumbai Indians"], date: "May 15", time: "7:30 PM IST" },
  { teams: ["Punjab Kings", "Rajasthan Royals"], date: "May 16", time: "7:30 PM IST" },
  { teams: ["Kolkata Knight Riders", "Royal Challengers Bengaluru"], date: "May 17", time: "7:30 PM IST" },
  { teams: ["Chennai Super Kings", "Gujarat Titans"], date: "May 18", time: "3:30 PM IST" },
  { teams: ["Sunrisers Hyderabad", "Lucknow Super Giants"], date: "May 18", time: "7:30 PM IST" },
  { teams: ["2nd Place", "1st Place"], date: "May 20 - Qualifier 1", time: "7:30 PM IST" },
  { teams: ["4th Place", "3rd Place"], date: "May 21 - Eliminator", time: "7:30 PM IST" },
  { teams: ["Winner of Eliminator", "Loser of Qualifier 1"], date: "May 23 - Qualifier 2", time: "7:30 PM IST" },
  { teams: ["Winner of Qualifier 2", "Winner of Qualifier 1"], date: "May 25 - Final", time: "7:30 PM IST" }
    ];

    let currentTeamIndex = 0;

    function autoFillTeams() {
        const now = new Date();
        let nextMatch = null;

        // Find next match regardless of time difference
        for (let match of cricketTeams) {
            const dateTime = parseMatchDateTime(match.date, match.time);
            const timeDiff = dateTime - now;
            
            // Get next upcoming match
            if (timeDiff > -(30 * 60 * 1000)) {
                nextMatch = {
                    teams: match.teams,
                    date: match.date,
                    time: match.time,
                    matchTime: dateTime,
                    timeDiff: timeDiff
                };
                break;
            }
        }

        if (!nextMatch) {
            alert("No upcoming matches available");
            return;
        }

        const hours = Math.floor(nextMatch.timeDiff / (60 * 60 * 1000));
        const minutes = Math.floor((nextMatch.timeDiff % (60 * 60 * 1000)) / (60 * 1000));
        const days = Math.floor(hours / 24);

        // If more than 30 minutes before match
        if (nextMatch.timeDiff > 30 * 60 * 1000) {
            let message = '';
            if (days > 0) {
                message = `Next match (${nextMatch.teams[0]} vs ${nextMatch.teams[1]}) starts in ${days} days ${hours % 24}h ${minutes}m`;
            } else {
                message = `Next match (${nextMatch.teams[0]} vs ${nextMatch.teams[1]}) starts in ${hours}h ${minutes}m`;
            }
            alert(`${message}\nCome back 30 minutes before match time to pick teams.`);
            
            // Store next match info
            localStorage.setItem('nextMatch', JSON.stringify({
                teams: nextMatch.teams,
                date: nextMatch.date,
                time: nextMatch.time,
                matchTime: nextMatch.matchTime
            }));
            return;
        }

        // Within 30 minutes of match start
        updateTeamDisplay(nextMatch);
        scheduleNextMatch(nextMatch);
        createMiniConfetti();

        // Clear stored match after displaying
        localStorage.removeItem('nextMatch');
    }

    function parseMatchDateTime(dateStr, timeStr) {
        const [month, day] = dateStr.split(' ');
        const [timeNumbers, meridiem] = timeStr.split(':')[0].split(' ')[0].split(' ');
        const minutes = timeStr.split(':')[1].split(' ')[0];
        
        // Create date object for current year
        const date = new Date();
        date.setMonth(getMonthNumber(month));
        date.setDate(parseInt(day));
        
        // Set hours (convert to 24-hour format if needed)
        let hour = parseInt(timeNumbers);
        if (timeStr.includes('PM') && hour !== 12) hour += 12;
        if (timeStr.includes('AM') && hour === 12) hour = 0;
        
        date.setHours(hour, parseInt(minutes), 0, 0);
        
        return date;
    }

    function updateTeamDisplay(match) {
        const team1Input = document.getElementById('team1-name');
        const team2Input = document.getElementById('team2-name');
        const team1Date = document.getElementById('team1-date');
        const team2Date = document.getElementById('team2-date');
        const button = document.querySelector('.btn.btn-secondary[onclick="autoFillTeams()"]');

        team1Input.style.transition = 'opacity 0.3s';
        team2Input.style.transition = 'opacity 0.3s';
        team1Input.style.opacity = '0';
        team2Input.style.opacity = '0';

        setTimeout(() => {
            team1Input.value = match.teams[0];
            team2Input.value = match.teams[1];
            team1Date.textContent = `Match Date: ${match.date} | ${match.time}`;
            team2Date.textContent = `Match Date: ${match.date} | ${match.time}`;
            team1Input.style.opacity = '1';
            team2Input.style.opacity = '1';
            
            document.getElementById('team1-display').textContent = match.teams[0];
            document.getElementById('team2-display').textContent = match.teams[1];

            // Disable button after selecting teams
            button.disabled = true;
        }, 300);
    }

    function scheduleNextMatch(currentMatch) {
        const now = new Date();
        let nextMatch = null;

        // Find the next match after current one
        for (let match of cricketTeams) {
            const dateTime = parseMatchDateTime(match.date, match.time);
            if (dateTime > currentMatch.matchTime) {
                nextMatch = {
                    matchTime: dateTime,
                    timeDiff: dateTime - now
                };
                break;
            }
        }

        if (nextMatch) {
            const button = document.querySelector('.btn.btn-secondary[onclick="autoFillTeams()"]');
            const enableTime = nextMatch.matchTime.getTime() - (30 * 60 * 1000);
            const timeToWait = enableTime - now.getTime();
            
            setTimeout(() => {
                button.disabled = false;
            }, timeToWait);
        }
    }

    function getMonthNumber(month) {
        const months = {
            'Jan': 0, 'Feb': 1, 'Mar': 2, 'Apr': 3,
            'May': 4, 'Jun': 5, 'Jul': 6, 'Aug': 7,
            'Sep': 8, 'Oct': 9, 'Nov': 10, 'Dec': 11
        };
        return months[month] || 0;
    }

    function createMiniConfetti() {
        const colors = ['#1e40af', '#059669', '#f59e0b'];
        for (let i = 0; i < 30; i++) {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            confetti.style.left = '50%';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.width = Math.random() * 8 + 3 + 'px';
            confetti.style.height = Math.random() * 8 + 3 + 'px';
            confetti.style.opacity = Math.random() + 0.5;
            confetti.style.animationDuration = Math.random() * 2 + 1 + 's';
            document.body.appendChild(confetti);
            setTimeout(() => confetti.remove(), 3000);
        }
    }

    function checkStoredMatch() {
        const storedMatch = localStorage.getItem('nextMatch');
        if (storedMatch) {
            const match = JSON.parse(storedMatch);
            const now = new Date();
            const matchTime = new Date(match.matchTime);
            const timeDiff = matchTime - now;

            // If within 30 minutes of match start
            if (timeDiff <= 30 * 60 * 1000 && timeDiff > -(30 * 60 * 1000)) {
                updateTeamDisplay({
                    teams: match.teams,
                    date: match.date,
                    time: match.time,
                    matchTime: matchTime,
                    timeDiff: timeDiff
                });
                scheduleNextMatch(match);
                createMiniConfetti();
                localStorage.removeItem('nextMatch');
            }
        }
    }

    // Update team name displays when input changes
    document.getElementById('team1-name').addEventListener('input', function() {
      document.getElementById('team1-display').textContent = this.value || 'Team 1';
    });
    
    document.getElementById('team2-name').addEventListener('input', function() {
      document.getElementById('team2-display').textContent = this.value || 'Team 2';
    });
    
    let isButtonEnabled = true;
    let cooldownTimer;

    function startCooldown(nextMatchTime) {
        const button = document.getElementById('randomize-btn');
        const now = new Date();
        let timeLeft = Math.floor((nextMatchTime - now) / 1000); // Convert to seconds
         
        button.disabled = true;
        isButtonEnabled = false;
        
        // Update button text to show countdown
        cooldownTimer = setInterval(() => {
            const hours = Math.floor(timeLeft / 3600);
            const minutes = Math.floor((timeLeft % 3600) / 60);
            const seconds = timeLeft % 60;
            const days = Math.floor(hours / 24);
            
            let timeString = '';
            if (days > 0) {
                timeString = `${days}d ${hours % 24}h ${minutes}m ${seconds}s`;
            } else {
                timeString = `${hours}h ${minutes}m ${seconds}s`;
            }
            
            button.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-shuffle" viewBox="0 0 16 16" style="margin-right: 8px;">
                    <path fill-rule="evenodd" d="M0 3.5A.5.5 0 0 1 .5 3H1c2.202 0 3.827 1.24 4.874 2.418.49.552.865 1.102 1.126 1.532.26-.43.636-.98 1.126-1.532C9.173 4.24 10.798 3 13 3v1c-1.798 0-3.173 1.01-4.126 2.082A9.624 9.624 0 0 0 7.556 8a9.624 9.624 0 0 0 1.317 1.918C9.828 10.99 11.204 12 13 12v1c-2.202 0-3.827-1.24-4.874-2.418A10.595 10.595 0 0 1 7 9.05c-.26.43-.636.98-1.126 1.532C4.827 11.76 3.202 13 1 13H.5a.5.5 0 0 1 0-1H1c1.798 0 3.173-1.01 4.126-2.082A9.624 9.624 0 0 0 6.444 8a9.624 9.624 0 0 0-1.317-1.918C4.172 5.01 2.796 4 1 4H.5a.5.5 0 0 1-.5-.5z"/>
                    <path d="M13 5.466V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192z"/>
                </svg>
                Next in ${timeString}`;
            
            timeLeft--;
            
            if (timeLeft < 0) {
                clearInterval(cooldownTimer);
                button.disabled = false;
                isButtonEnabled = true;
                button.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-shuffle" viewBox="0 0 16 16" style="margin-right: 8px;">
                        <path fill-rule="evenodd" d="M0 3.5A.5.5 0 0 1 .5 3H1c2.202 0 3.827-1.24 4.874-2.418.49.552.865 1.102 1.126 1.532.26-.43.636-.98 1.126-1.532C9.173 4.24 10.798 3 13 3v1c-1.798 0-3.173 1.01-4.126 2.082A10.595 10.595 0 0 1 7 9.05c-.26.43-.636.98-1.126 1.532C4.827 11.76 3.202 13 1 13H.5a.5.5 0 0 1 0-1H1c1.798 0 3.173-1.01 4.126-2.082A9.624 9.624 0 0 0 6.444 8a9.624 9.624 0 0 0-1.317-1.918C4.172 5.01 2.796 4 1 4H.5a.5.5 0 0 1-.5-.5z"/>
                        <path d="M13 5.466V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192z"/>
                    </svg>
                    Randomize Draft`;
            }
        }, 1000);
    }

    function findNextMatch(currentMatchTime) {
        for (let match of cricketTeams) {
            const dateTime = parseMatchDateTime(match.date, match.time);
            if (dateTime > currentMatchTime) {
                return dateTime;
            }
        }
        return null;
    }

    function randomizeDraft() {
        // Check if teams are selected
        const team1Input = document.getElementById('team1-name');
        const team2Input = document.getElementById('team2-name');
        
        if (!team1Input.value || !team2Input.value) {
            alert("Please select teams using 'Get Next Match' first!");
            return;
        }

        // Check if within 30 minutes of match time
        const matchDateStr = document.getElementById('team1-date').textContent.replace('Match Date: ', '');
        if (!matchDateStr) {
            alert("Match date not found. Please select teams first!");
            return;
        }

        const [date, time] = matchDateStr.split(' | ');
        const matchDateTime = parseMatchDateTime(date, time);
        const now = new Date();
        const timeDiff = matchDateTime - now;

        // If not within 30 minutes before match
        if (timeDiff > 30 * 60 * 1000) {
            const hours = Math.floor(timeDiff / (60 * 60 * 1000));
            const minutes = Math.floor((timeDiff % (60 * 60 * 1000)) / (60 * 1000));
            const days = Math.floor(hours / 24);

            let message = '';
            if (days > 0) {
                message = `Match starts in ${days} days ${hours % 24}h ${minutes}m`;
            } else {
                message = `Match starts in ${hours}h ${minutes}m`;
            }
            alert(`${message}\nCome back 30 minutes before match time to randomize teams.`);
            return;
        }

        // If match has already started (more than 30 minutes past start time)
        if (timeDiff < -(30 * 60 * 1000)) {
            alert("This match has already started. Please select a new match.");
            return;
        }

        if (!isButtonEnabled) return;
        
        const nextMatch = findNextMatch(matchDateTime);
        if (nextMatch) {
            startCooldown(nextMatch);
        }
        
        // Rest of the existing randomizeDraft code...
        const team1Name = document.getElementById('team1-name').value || 'Team 1';
        const team2Name = document.getElementById('team2-name').value || 'Team 2';
        
        const player1Name = document.getElementById('player1-name').value || '';
        const player2Name = document.getElementById('player2-name').value || 'Player 2';
        
        document.getElementById('player1-result-header').textContent = player1Name + "'s Team";
        document.getElementById('player2-result-header').textContent = player2Name + "'s Team";
        
        const allPlayers = [
            {team: team1Name, teamId: 1, number: 1},
            {team: team1Name, teamId: 1, number: 2},
            {team: team1Name, teamId: 1, number: 3},
            {team: team1Name, teamId: 1, number: 4},
            {team: team2Name, teamId: 2, number: 1},
            {team: team2Name, teamId: 2, number: 2},
            {team: team2Name, teamId: 2, number: 3},
            {team: team2Name, teamId: 2, number: 4}
        ];
        
        for (let i = allPlayers.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [allPlayers[i], allPlayers[j]] = [allPlayers[j], allPlayers[i]];
        }
        
        const player1Picks = allPlayers.slice(0, 4);
        const player2Picks = allPlayers.slice(4, 8);
        
        displayResults(player1Picks, player2Picks);
        
        document.getElementById('results').style.display = 'block';
        
        createConfetti();
        
        document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
    }
    
    function displayResults(player1Picks, player2Picks) {
        const player1Div = document.getElementById('player1-picks');
        const player2Div = document.getElementById('player2-picks');
        
        player1Div.innerHTML = '';
        player2Div.innerHTML = '';
        
        function createResultItem(pick, stats) {
            const li = document.createElement('li');
            li.className = 'result-item';
            
            const playerNumber = document.createElement('span');
            playerNumber.className = `player-number-result team${pick.teamId}-number`;
            playerNumber.textContent = pick.number;
            
            const playerInfo = document.createElement('div');
            playerInfo.className = 'player-info';
            playerInfo.innerHTML = `
                <span class="player-name">Player ${pick.number}</span>
                <span class="team-name">${pick.team}</span>
            `;
            
            const statsDisplay = document.createElement('div');
            statsDisplay.className = 'player-stats-display';
            statsDisplay.innerHTML = `
                <div class="stat-row">Runs: ${stats.runs}</div>
                <div class="stat-row">4s: ${stats.fours} (${stats.fours * 3}pts)</div>
                <div class="stat-row">6s: ${stats.sixes} (${stats.sixes * 5}pts)</div>
                <div class="stat-total">${stats.runs + (stats.fours * 3) + (stats.sixes * 5)} pts</div>
            `;
            
            li.appendChild(playerNumber);
            li.appendChild(playerInfo);
            li.appendChild(statsDisplay);
            
            return li;
        }

        function createTeamTotal(stats) {
            const totalSection = document.createElement('div');
            totalSection.className = 'team-total-section';
            
            const total = stats.runs + (stats.fours * 3) + (stats.sixes * 5);
            
            totalSection.innerHTML = `
                <div class="team-total-header">Team Summary</div>
                <div class="total-stats-grid">
                    <div class="total-stat-box">
                        <div class="stat-label">Total Runs</div>
                        <div class="stat-value">${stats.runs}</div>
                    </div>
                    <div class="total-stat-box">
                        <div class="stat-label">Boundaries</div>
                        <div class="stat-value">${stats.fours}x4s, ${stats.sixes}x6s</div>
                    </div>
                    <div class="total-stat-box">
                        <div class="stat-label">Total Points</div>
                        <div class="stat-value">${total}</div>
                    </div>
                </div>
            `;
            
            return totalSection;
        }

        function getPlayerStats(playerNumber, teamId) {
            const inputs = document.querySelectorAll(`.team-${teamId} .player-item:nth-child(${playerNumber}) .stat-input`);
            return {
                runs: parseInt(inputs[0].value) || 0,
                fours: parseInt(inputs[1].value) || 0,
                sixes: parseInt(inputs[2].value) || 0
            };
        }

        let player1Stats = {runs: 0, fours: 0, sixes: 0};
        let player2Stats = {runs: 0, fours: 0, sixes: 0};

        player1Picks.forEach(pick => {
            const stats = getPlayerStats(pick.number, pick.teamId);
            player1Stats.runs += stats.runs;
            player1Stats.fours += stats.fours;
            player1Stats.sixes += stats.sixes;
            
            const li = createResultItem(pick, stats);
            player1Div.appendChild(li);
        });
        
        player1Div.appendChild(createTeamTotal(player1Stats));
        
        // Repeat the same for player 2
        player2Picks.forEach(pick => {
            const stats = getPlayerStats(pick.number, pick.teamId);
            player2Stats.runs += stats.runs;
            player2Stats.fours += stats.fours;
            player2Stats.sixes += stats.sixes;
            
            const li = createResultItem(pick, stats);
            player2Div.appendChild(li);
        });
        
        player2Div.appendChild(createTeamTotal(player2Stats));

        const player1Total = player1Stats.runs + (player1Stats.fours * 3) + (player1Stats.sixes * 5);
        const player2Total = player2Stats.runs + (player2Stats.fours * 3) + (player2Stats.sixes * 5);
        
        const difference = Math.abs(player1Total - player2Total);
        const player1Name = document.getElementById('player1-name').value || 'Player 1';
        const player2Name = document.getElementById('player2-name').value || 'Player 2';
        
        const scoreDiff = document.getElementById('score-difference');
        const scoreBar = document.getElementById('score-bar');
        
        let message;
        if (player1Total > player2Total) {
            message = `${player1Name} is winning by ${difference} points`;
            scoreDiff.className = 'winning';
            scoreBar.style.transform = `translateX(${(player1Total / (player1Total + player2Total) * 100) - 50}%)`;
        } else if (player2Total > player1Total) {
            message = `${player2Name} is winning by ${difference} points`;
            scoreDiff.className = 'losing';
            scoreBar.style.transform = `translateX(${(player1Total / (player1Total + player2Total) * 100) - 50}%)`;
        } else {
            message = "It's a tie!";
            scoreDiff.className = 'tied';
            scoreBar.style.transform = 'translateX(0)';
        }
        
        scoreDiff.textContent = message;

        if (player1Total !== player2Total) {
            const winner = player1Total > player2Total 
                ? { name: player1Name, score: player1Total, stats: player1Stats }
                : { name: player2Name, score: player2Total, stats: player2Stats };
            showWinnerCelebration(winner.name, winner.score, winner.stats);
        }

        saveResultsToLocalStorage(player1Picks, player2Picks, player1Stats, player2Stats);
    }
    
    function saveResultsToLocalStorage(player1Picks, player2Picks, player1Stats, player2Stats) {
        const results = {
            timestamp: Date.now(),
            matchDate: document.getElementById('team1-date').textContent.replace('Match Date: ', ''),
            team1: document.getElementById('team1-name').value,
            team2: document.getElementById('team2-name').value,
            player1: {
                name: document.getElementById('player1-name').value,
                picks: player1Picks,
                stats: player1Stats
            },
            player2: {
                name: document.getElementById('player2-name').value,
                picks: player2Picks,
                stats: player2Stats
            }
        };
        
        localStorage.setItem('cricketResults', JSON.stringify(results));
    }

    function loadResultsFromLocalStorage() {
        const savedResults = localStorage.getItem('cricketResults');
        if (!savedResults) return null;
        
        const results = JSON.parse(savedResults);
        const now = Date.now();
        const hours48 = 48 * 60 * 60 * 1000;
        
        // Check if results are older than 48 hours
        if (now - results.timestamp > hours48) {
            localStorage.removeItem('cricketResults');
            return null;
        }
        
        return results;
    }

    function clearStats() {
        document.querySelectorAll('.stat-input').forEach(input => {
            input.value = '';
        });
        localStorage.removeItem('cricketStats');
    }
    
    function createConfetti() {
        const existingConfetti = document.querySelectorAll('.confetti');
        existingConfetti.forEach(c => c.remove());
        
        const colors = ['#FD0', '#FC0', '#F90', '#FF0', '#0CF', '#0FC', '#CF0'];
        
        for (let i = 0; i < 100; i++) {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.width = Math.random() * 10 + 5 + 'px';
            confetti.style.height = Math.random() * 10 + 5 + 'px';
            confetti.style.opacity = Math.random() + 0.5;
            confetti.style.animationDuration = Math.random() * 3 + 2 + 's';
            confetti.style.animationDelay = Math.random() * 5 + 's';
            
            document.body.appendChild(confetti);
            
            setTimeout(() => {
                confetti.remove();
            }, 8000);
        }
    }

    function generateShareText() {
      const team1Name = document.getElementById('team1-name').value || 'Team 1';
      const team2Name = document.getElementById('team2-name').value || 'Team 2';
      const player1Name = document.getElementById('player1-name').value || 'Player 1';
      const player2Name = document.getElementById('player2-name').value || 'Player 2';
      const matchDate = document.getElementById('team1-date').textContent.replace('Match Date: ', '');
      
      const player1Picks = Array.from(document.getElementById('player1-picks').children)
        .map(li => `${li.children[0].textContent} Player ${li.children[1].textContent}`)
        .join('\n');
      
      const player2Picks = Array.from(document.getElementById('player2-picks').children)
        .map(li => `${li.children[0].textContent} Player ${li.children[1].textContent}`)
        .join('\n');
      
      return `üèè Cricket Team Draft Results üèè\n\n` +
        `Match: ${team1Name} vs ${team2Name}\n` +
        `Date: ${matchDate}\n\n` +
        `${player1Name}'s Team:\n${player1Picks}\n\n` +
        `${player2Name}'s Team:\n${player2Picks}`;
    }
    
    async function copyToClipboard(text) {
      try {
        await navigator.clipboard.writeText(text);
        return true;
      } catch (err) {
        const textarea = document.createElement('textarea');
        textarea.value = text;
        textarea.style.position = 'fixed';
        textarea.style.opacity = '0';
        document.body.appendChild(textarea);
        textarea.focus();
        textarea.select();
        
        try {
          document.execCommand('copy');
          document.body.removeChild(textarea);
          return true;
        } catch (err) {
          document.body.removeChild(textarea);
          return false;
        }
      }
    }
    
    async function shareResults() {
      const shareText = generateShareText();
      
      if (navigator.share) {
        try {
          await navigator.share({
            title: 'Cricket Team Draft Results',
            text: shareText
          });
        } catch (err) {
          console.error('Error sharing:', err);
          const copied = await copyToClipboard(shareText);
          if (copied) {
            alert('Results copied to clipboard!');
          } else {
            alert('Failed to copy results. Please try again.');
          }
        }
      } else {
        const copied = await copyToClipboard(shareText);
        if (copied) {
          alert('Results copied to clipboard!');
        } else {
          alert('Failed to copy results. Please try again.');
        }
      }
    }

    function saveStatsToLocalStorage() {
        const stats = {
            team1: [],
            team2: []
        };
        
        // Save stats for team 1
        document.querySelectorAll('.team-1 .player-item').forEach((player, index) => {
            const inputs = player.querySelectorAll('.stat-input');
            stats.team1.push({
                runs: inputs[0].value || 0,
                fours: inputs[1].value || 0,
                sixes: inputs[2].value || 0
            });
        });
        
        // Save stats for team 2
        document.querySelectorAll('.team-2 .player-item').forEach((player, index) => {
            const inputs = player.querySelectorAll('.stat-input');
            stats.team2.push({
                runs: inputs[0].value || 0,
                fours: inputs[1].value || 0,
                sixes: inputs[2].value || 0
            });
        });
        
        localStorage.setItem('cricketStats', JSON.stringify(stats));
    }

    function loadStatsFromLocalStorage() {
        const savedStats = localStorage.getItem('cricketStats');
        if (!savedStats) return;
        
        const stats = JSON.parse(savedStats);
        
        // Load stats for team 1
        stats.team1.forEach((playerStats, index) => {
            const inputs = document.querySelectorAll(`.team-1 .player-item:nth-child(${index + 1}) .stat-input`);
            inputs[0].value = playerStats.runs;
            inputs[1].value = playerStats.fours;
            inputs[2].value = playerStats.sixes;
        });
        
        // Load stats for team 2
        stats.team2.forEach((playerStats, index) => {
            const inputs = document.querySelectorAll(`.team-2 .player-item:nth-child(${index + 1}) .stat-input`);
            inputs[0].value = playerStats.runs;
            inputs[1].value = playerStats.fours;
            inputs[2].value = playerStats.sixes;
        });
    }

    // Add event listeners to save stats when input changes
    document.querySelectorAll('.stat-input').forEach(input => {
        input.addEventListener('change', saveStatsToLocalStorage);
    });

    // Load stats when page loads
    document.addEventListener('DOMContentLoaded', () => {
        loadStatsFromLocalStorage();
        checkStoredMatch();
        
        // Load previous results if they exist
        const savedResults = loadResultsFromLocalStorage();
        if (savedResults) {
            document.getElementById('team1-name').value = savedResults.team1;
            document.getElementById('team2-name').value = savedResults.team2;
            document.getElementById('player1-name').value = savedResults.player1.name;
            document.getElementById('player2-name').value = savedResults.player2.name;
            document.getElementById('team1-date').textContent = `Match Date: ${savedResults.matchDate}`;
            document.getElementById('team2-date').textContent = `Match Date: ${savedResults.matchDate}`;
            
            // Update team displays
            document.getElementById('team1-display').textContent = savedResults.team1;
            document.getElementById('team2-display').textContent = savedResults.team2;
            
            // Display the results
            displayResults(savedResults.player1.picks, savedResults.player2.picks);
            document.getElementById('results').style.display = 'block';
        }
    });

    function updateStats() {
        const team1Name = document.getElementById('team1-name').value;
        const team2Name = document.getElementById('team2-name').value;
        
        if (!team1Name || !team2Name) {
            alert("Please select teams first!");
            return;
        }

        // Get all player picks from the team containers
        const player1Picks = [];
        const player2Picks = [];

        // Process team 1 and team 2 players
        [1, 2].forEach(teamId => {
            document.querySelectorAll(`.team-${teamId} .player-item`).forEach(item => {
                const playerNumber = item.querySelector('.player-number').textContent;
                const playerStats = Array.from(item.querySelectorAll('.stat-input')).map(input => input.value || 0);
                
                const playerData = {
                    team: teamId === 1 ? team1Name : team2Name,
                    teamId: teamId,
                    number: parseInt(playerNumber)
                };

                // Alternate between player1Picks and player2Picks
                if ((teamId === 1 && parseInt(playerNumber) % 2 === 1) || 
                    (teamId === 2 && parseInt(playerNumber) % 2 === 0)) {
                    player1Picks.push(playerData);
                } else {
                    player2Picks.push(playerData);
                }
            });
        });

        // Display updated results
        displayResults(player1Picks, player2Picks);
        document.getElementById('results').style.display = 'block';
        
        // Save stats to localStorage
        saveStatsToLocalStorage();
        
        // Scroll to results
        document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
    }

    function showWinnerCelebration(winnerName, score, stats) {
        const modal = document.getElementById('winner-celebration');
        modal.style.display = 'block';
        modal.querySelector('.winner-name').textContent = `${winnerName} Wins!`;
        
        // Add stats
        const statsContainer = modal.querySelector('.winner-stats');
        statsContainer.innerHTML = `
            <div class="stat-highlight">
                <div>Total Points</div>
                <div>${score}</div>
            </div>
            <div class="stat-highlight">
                <div>Runs</div>
                <div>${stats.runs}</div>
            </div>
            <div class="stat-highlight">
                <div>Boundaries</div>
                <div>${stats.fours}x4s ${stats.sixes}x6s</div>
            </div>
        `;

        // Create sparkles
        for (let i = 0; i < 20; i++) {
            createSparkle();
        }

        // Create fireworks
        for (let i = 0; i < 30; i++) {
            setTimeout(() => createFirework(), i * 100);
        }

        // Hide modal after 5 seconds
        setTimeout(() => {
            modal.style.display = 'none';
        }, 5000);
    }

    function createSparkle() {
        const sparkle = document.createElement('div');
        sparkle.className = 'sparkle';
        sparkle.style.left = Math.random() * 100 + '%';
        sparkle.style.animationDelay = Math.random() * 3 + 's';
        document.getElementById('winner-celebration').appendChild(sparkle);
        setTimeout(() => sparkle.remove(), 3000);
    }

    function createFirework() {
        const firework = document.createElement('div');
        firework.className = 'firework';
        firework.style.left = Math.random() * 100 + '%';
        firework.style.bottom = '0';
        firework.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
        document.getElementById('winner-celebration').appendChild(firework);
        setTimeout(() => firework.remove(), 1000);
    }
  </script>
</body>
</html>